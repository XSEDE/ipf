{
  "name": "slurm_compute",
  "timeout": 55,
  "description": "This workflow gathers GLUE2 compute information by interacting with SLURM",
  "steps": [
    { "name": "teragrid.sysinfo.ResourceNameStep" },
    { "name": "teragrid.sysinfo.SiteNameStep" },
    { "name": "teragrid.sysinfo.PlatformStep" },
    { "name": "glue2.location.LocationStep",
      "params": {
        "location": {
          "Name": "Texas Advanced Computing Center",
          "Place": "Austin",
          "Country": "US",
          "Latitude": 30.387055,
          "Longitude": -97.726865
        }
      }
    },
    { "name": "glue2.slurm.ComputingActivitiesStep" },
    { "name": "glue2.slurm.ComputingSharesStep" },
    { "name": "glue2.slurm.ComputingServiceStep" },
    { "name": "glue2.slurm.ExecutionEnvironmentsStep" },
    { "name": "glue2.slurm.ComputingManagerStep" },
    {
      "name": "ipf.publish.AmqpStep",
      "description": "Publish compute resource description to subscibers",
      "params": {
        "publish": ["glue2.compute.PublicOgfJson"],
        "services": [ "info1.dyn.teragrid.org", "info2.dyn.teragrid.org" ],
        "ssl_options": {
          "keyfile": "key.pem",
          "certfile": "cert.pem",
          "ca_certs": "ca_certs.pem"
        },
        "vhost": "xsede_public",
        "exchange": "glue2.compute"
      }
    },
    {
      "name": "ipf.publish.AmqpStep",
      "description": "Publish a description of current jobs to subscribers",
      "params": {
        "publish": ["glue2.compute.PrivateOgfJson"],
        "services": [ "info1.dyn.teragrid.org", "info2.dyn.teragrid.org" ],
        "ssl_options": {
          "keyfile": "key.pem",
          "certfile": "cert.pem",
          "ca_certs": "ca_certs.pem"
        },
	"vhost": "xsede_private",
        "exchange": "glue2.computing_activities"
      }
    },
    {
      "name": "ipf.publish.FileStep",
      "description": "Publish JSON version of compute resource description to a file for debugging",
      "params": {
        "publish": ["glue2.compute.PublicOgfJson"],
        "path": "public.json"
      }
    },
    {
      "name": "ipf.publish.FileStep",
      "description": "Publish a description of current jobs in JSON to a file for debugging",
      "params": {
        "publish": ["glue2.compute.PrivateOgfJson"],
        "path": "private.json"
      }
    },
    {
      "name": "ipf.publish.FileStep",
      "description": "Publish XML version of compute resource description to a file for potential use by WS-MDS",
      "params": {
        "publish": ["glue2.compute.PublicTeraGridXml"],
        "path": "public.xml"
      }
    },
    {
      "name": "ipf.publish.FileStep",
      "description": "Publish a description of current jobs in XML to a file for potential use by WS-MDS",
      "params": {
        "publish": ["glue2.compute.PrivateTeraGridXml"],
        "path": "private.xml"
      }
    }
  ]
}
